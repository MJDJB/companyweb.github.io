<!DOCTYPE html>
<!-- ä¿®æ”¹ lang å±¬æ€§ç‚º en -->
<html lang="en">
<head>
    <meta charset="UTF - 8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.1/lunar.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <title>Tianji Metaphysics</title>
    <style>
        /* äº§å“å…è´£å£°æ˜ä¸“å±æ ·å¼ */
.product-disclaimer {
  margin: 18px 0;
  padding: 12px 15px;
  background: rgba(255, 240, 240, 0.3);
  border: 1px dashed rgba(218, 165, 32, 0.3);
  border-radius: 4px;
  display: flex;
  align-items: center;
  font-size: 0.75rem;
  line-height: 1.5;
}

.disclaimer-icon {
  color: #d64c35;
  font-weight: bold;
  margin-right: 8px;
  font-size: 1.1rem;
}

.disclaimer-content {
  color: #666;
  flex: 1;
}

/* ç¡®ä¿ä¸å½±å“å…¬å¸å£°æ˜æ ·å¼ */
footer, .company-disclaimer {
  /* åŸæœ‰å…¬å¸å£°æ˜æ ·å¼å°†å®Œå…¨ä¸å—å½±å“ */
}

        /* ===== ä¸­å›½é£å¼¹å‡ºæ¨¡æ€æ¡† ===== */
.china-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(250, 240, 230, 0.9);
  z-index: 9999;
  display: none;
  justify-content: center;
  align-items: center;
  animation: fadeIn 0.5s ease-out;
}

.modal-content {
  text-align: center;
  max-width: 300px;
}

.bagua-wheel {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto 25px;
}

.bagua-symbols {
  position: absolute;
  width: 100%;
  height: 100%;
  border: 3px solid var(--secondary);
  border-radius: 50%;
  animation: baguaRotate 10s linear infinite;
}

.bagua-symbols span {
  position: absolute;
  font-size: 24px;
  color: var(--primary);
}

/* å…«å¦ç¬¦å·å®šä½ */
.bagua-symbols span:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%) translateY(-50%); }
.bagua-symbols span:nth-child(2) { top: 25%; right: 15%; }
.bagua-symbols span:nth-child(3) { top: 50%; right: 0; transform: translateX(50%) translateY(-50%); }
.bagua-symbols span:nth-child(4) { bottom: 25%; right: 15%; }
.bagua-symbols span:nth-child(5) { bottom: 0; left: 50%; transform: translateX(-50%) translateY(50%); }
.bagua-symbols span:nth-child(6) { bottom: 25%; left: 15%; }
.bagua-symbols span:nth-child(7) { top: 50%; left: 0; transform: translateX(-50%) translateY(-50%); }
.bagua-symbols span:nth-child(8) { top: 25%; left: 15%; }

.taiji-center {
  position: absolute;
  top: 70%;
  left: 70%;
  transform: translate(-50%, -50%);
  width: 60px;
  height: 60px;
}

.yin-yang {    
  /* top: 125px;
  left: 35px; */
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: linear-gradient(to bottom, var(--primary) 50%, var(--bg) 50%);
  position: relative;
  animation: taijiPulse 2.5s ease infinite;
}

.yin-yang:before,
.yin-yang:after {
  content: '';
  /* position: absolute; */
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.yin-yang:before {
  background: var(--bg);
  top: 15px;
  left: 15px;
}

.yin-yang:after {
  background: var(--primary);
  bottom: 15px;
  right: 15px;
}

.loading-text .title {
  color: var(--primary);
  font-size: 1.3rem;
  font-weight: bold;
  margin-bottom: 5px;
}

.loading-text .subtitle {
  color: var(--text);
  font-size: 0.9rem;
  opacity: 0.8;
}

/* åŠ¨ç”»å®šä¹‰ */
@keyframes baguaRotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes taijiPulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.05); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

        :root {
            --primary: #8B0000; /* ç¡ƒç ‚ç´… */
            --secondary: #DAA520; /* é‡‘è‰² */
            --bg: #FAF0E6; /* å®£ç´™è‰² */
            --text: #5C3317; /* å¢¨è‰² */
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Microsoft JhengHei', 'æ¨™æ¥·é«”', serif;
        }
        body {
            background-color: var(--bg);
            color: var(--text);
            line-height: 2;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100" opacity="0.05"><text x="10" y="60" font-family="æ¨™æ¥·é«”" font-size="18">å¤©åœ°ç„é»ƒ å®‡å®™æ´ªè’</text></svg>');
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 253, 245, 0.9);
            padding: 30px;
            border: 1px solid var(--secondary);
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        .container:before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100" opacity="0.03"><path d="M20,20 L80,20 L80,80 L20,80 Z" stroke="%238B0000" stroke-width="1"/></svg>');
            pointer-events: none;
            z-index: 0;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px double var(--primary);
            position: relative;
        }
        .yin-yang {
            width: 70px;
            height: 70px;
            margin: 0 auto 15px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="49" fill="%23333" stroke="%23DAA520" stroke-width="1"/><path d="M50,0 a50,50 0 0 1 0,100 25,25 0 0 0 0,-50 25,25 0 0 1 0,-50" fill="%23fff"/><circle cx="50" cy="25" r="8" fill="%23333"/><circle cx="50" cy="75" r="8" fill="%23fff"/></svg>') no-repeat center;
        }
        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            letter-spacing: 10px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            margin-bottom: 10px;
        }
        @keyframes glow {
            0% { box-shadow: 0 0 10px var(--primary); }
            50% { box-shadow: 0 0 30px var(--primary); }
            100% { box-shadow: 0 0 10px var(--primary); }
        }
        .form-container, .result-container {
            animation: glow 3s infinite;
        }
        .form-container {
            padding: 30px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 5px;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
            border: 1px solid var(--secondary);
        }
        .form-group {
            margin-bottom: 25px;
        }
        label {
            display: block;
            margin-bottom: 10px;
            color: var(--primary);
            font-weight: bold;
            font-size: 1.1rem;
        }
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--secondary);
            border-radius: 4px;
            font-size: 1rem;
            background: rgba(255, 248, 240, 0.8);
        }
        button {
            background: linear-gradient(to bottom, var(--primary), #6B0000);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.1rem;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            letter-spacing: 2px;
            font-family: 'æ¨™æ¥·é«”';
        }
        button:hover {
            background: linear-gradient(to bottom, #6B0000, var(--primary));
        }
        .result-container {
            display: none;
            padding: 30px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 5px;
            border: 1px solid var(--secondary);
            animation: fadeIn 0.8s;
            position: relative;
            margin-top: 20px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .destiny-type {
            font-size: 1.8rem;
            color: var(--primary);
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-top: 1px dashed var(--secondary);
            border-bottom: 1px dashed var(--secondary);
            font-weight: bold;
        }
        .bazi-display {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .bazi-pillar {
            font-size: 2.3rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .wuxing-title {
            text-align: center;
            font-size: 1.3rem;
            color: var(--primary);
            margin: 25px 0 15px;
            position: relative;
        }
        .wuxing-title:before, .wuxing-title:after {
            content: "âœ§";
            color: var(--secondary);
            margin: 0 15px;
        }
        .wuxing-bars {
            margin: 30px 0;
        }
        .wuxing-bar {
            height: 20px;
            background: #F0F0F0;
            border-radius: 10px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
            border: 1px solid #ddd;
        }
        .wuxing-fill {
            height: 100%;
            position: absolute;
            transition: width 1s ease-out;
            text-align: right;
            padding-right: 5px;
            font-size: 0.8rem;
            line-height: 20px;
            color: white;
        }
        .wood { background: #2E8B57; }
        .fire { background: #DC143C; }
        .earth { background: #DAA520; }
        .metal { background: #4682B4; }
        .water { background: #4169E1; }
        .analysis-content {
            margin: 25px 0;
            line-height: 2;
        }
        .cinnabar-card {
            border: 1px dashed var(--secondary);
            padding: 25px;
            margin-top: 40px;
            text-align: center;
            position: relative;
            background: rgba(255, 248, 240, 0.7);
        }
        .cinnabar-card:before {
            content: "å‰";
            position: absolute;
            top: 10px;
            right: 15px;
            color: var(--primary);
            opacity: 0.1;
            font-size: 6rem;
            z-index: 0;
            font-family: 'æ¨™æ¥·é«”';
        }
        .cinnabar-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }
        .cinnabar-name {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: bold;
        }
        .cinnabar-price {
            font-size: 1.5rem;
            color: var(--secondary);
            margin: 15px 0;
        }
        .cinnabar-benefits {
            text-align: left;
            margin: 20px 0;
            padding-left: 20px;
        }
        .cinnabar-benefits li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 25px;
        }
        .cinnabar-benefits li:before {
            content: "âœ“";
            color: var(--secondary);
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        .btn-buy {
            display: inline-block;
            padding: 12px 30px;
            background: var(--secondary);
            color: #333;
            text-decoration: none;
            border-radius: 30px;
            margin-top: 15px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .btn-buy:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(218, 165, 32, 0.3);
        }
        @media (max-width: 600px) {
            h1 {
                font-size: 1.8rem;
                letter-spacing: 5px;
            }
            .bazi-pillar {
                font-size: 1.8rem;
            }
        }
        .challenge-options {
            display: grid;
            gap: 16px;
            grid-template-columns: 1fr 1fr;
            margin-top: 10px;
        }

        .option-card {
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            gap: 12px;
            align-items: center;
            background: #fff;
        }

        .option-card .icon {
            font-size: 1.8em;
        }

        .option-card:hover {
            border-color: #d64c35;
            background: #fff5f1;
        }

        .option-card.selected {
            border-color: #d64c35;
            background: #fff0e9;
            box-shadow: 0 0 0 2px #d64c35 inset;
        }

        .option-card p {
            margin: 0;
            font-size: 0.9em;
            color: #555;
        }
/* â–¼â–¼â–¼ åœ¨è¿™é‡Œæ’å…¥ä¼˜åŒ–ä»£ç  â–¼â–¼â–¼ */
  .challenge-options {
    display: grid;
    gap: 12px;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }
  .option-card {
    min-height: 80px;
    padding: 15px;
  }
  @media (max-width: 480px) {
    .option-card {
      min-height: auto;
      padding: 12px;
    }
  }
  /* â–²â–²â–² æ’å…¥ç»“æŸ â–²â–²â–² */
    /* åŸæœ‰æ ·å¼ä¿æŒä¸å˜... */

    /* â–¼â–¼â–¼ æ·»åŠ æ—¥æœŸè¾“å…¥æ¡†ä¼˜åŒ–æ ·å¼ â–¼â–¼â–¼ */
    .date-input-container {
    position: relative;
}

.birthday-input {
    width: 100%;
    padding: 12px 15px;
    background: rgba(255, 248, 240, 0.8);
    border: 1px solid var(--secondary);
    border-radius: 4px;
    font-size: 1rem;
    color: var(--text);
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%238B0000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Cline x1='16' y1='2' x2='16' y2='6'%3E%3C/line%3E%3Cline x1='8' y1='2' x2='8' y2='6'%3E%3C/line%3E%3Cline x1='3' y1='10' x2='21' y2='10'%3E%3C/line%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 20px;
    padding-right: 40px;
}

/* ç§»é™¤æ—§çš„æ—¥æœŸè¾“å…¥æ¡†æ ·å¼ */
#birthday {
    -webkit-appearance: none;
    min-height: 48px;
    padding: 12px 15px;
    color: var(--text);
    background: rgba(255, 248, 240, 0.8);
    font-family: Arial, sans-serif;
    /* æ–°å¢ï¼šä¸ºåŸç”Ÿå›¾æ ‡ç•™å‡ºç©ºé—´ */
    padding-right: 40px;
}

#birthday::-webkit-calendar-picker-indicator {
    opacity: 1; /* æ¢å¤é»˜è®¤å¯è§æ€§ */
    position: relative; /* å–æ¶ˆç»å¯¹å®šä½ */
    width: 20px; /* å›ºå®šå®½åº¦ */
    height: 20px; /* å›ºå®šé«˜åº¦ */
    padding: 0;
    margin: 0;
    cursor: pointer;
    /* ç§»é™¤ä»¥ä¸‹å±æ€§ */
    /* position: absolute; */
    /* width: 100%; */
    /* height: 100%; */
}

    #birthday::before {
        content: "Select your birth date (MM/DD/YYYY)";
        color: #888;
        position: absolute;
    }

    #birthday:focus::before,
    #birthday:valid::before {
        display: none;
    }

    @supports (-moz-appearance:none) {
        #birthday {
            background-image: none;
            padding-right: 15px;
        }
        #birthday:invalid {
            box-shadow: none;
        }
    }

    @media (max-width: 480px) {
        #birthday {
            font-size: 16px;
            padding: 15px;
            background-position: right 10px center;
        }
    }
    /* â–²â–²â–² æ—¥æœŸè¾“å…¥æ¡†ä¼˜åŒ–ç»“æŸ â–²â–²â–² */
    </style>
</head>
<body>

    <div class="container">
      <header>
        <div style="position: relative;left: 35px;top: 20px"><div class="yin-yang"></div></div>
        <!-- Add Bagua Symbol -->
        <div class="bagua">
          <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 100 100">
            <!-- Simple Bagua Graphic -->
            <circle cx="50" cy="50" r="45" fill="#333" stroke="#DAA520" stroke-width="2" />
            <path d="M50,10 v30 M50,60 v30 M20,50 h30 M70,50 h30" stroke="#DAA520" stroke-width="4" />
          </svg>
        </div>
        <h1>Tianji Metaphysics</h1>
        <p>BaZi Destiny Reading Â· Elemental Balance Â· Vermillion Sigil</p>
      </header>
    
      <div class="form-container" id="form">
        <div class="metaphysics-intro">
          <p>
            BaZi (Eight Characters) is an ancient Chinese metaphysical system that reveals your life path through your
            birth date and time. It reflects how the Five Elements (Wood, Fire, Earth, Metal, Water) influence your destiny.
          </p>
        </div>
    
        <div class="form-group" id="first">
            <label for="birthday">Date of Birth</label>
            <!-- æ›¿æ¢åŸæ¥çš„input type="date"ä¸ºä»¥ä¸‹ç»“æ„ -->
            <div class="date-input-container">
                <input type="text" id="birthday" class="birthday-input" placeholder="Select your birth date" readonly>
                <input type="hidden" id="birthday-native" required>
            </div>
            <!-- <span class="date-format-hint">Format: MM/DD/YYYY</span> -->
        </div>
        
               
        <div class="form-group" id="second">
            <label for="birthtime">Birth Time</label>
            <select id="birthtime" required>
                <option value="">Select a time period</option>
                <option value="morning">Morning (5:00 AM â€“ 12:59 PM)</option>
                <option value="afternoon">Afternoon (1:00 PM â€“ 6:59 PM)</option>
                <option value="evening">Evening/Night (7:00 PM â€“ 4:59 AM)</option>
            </select>
        </div>          
    
        <div class="form-group" id="third">
          <label for="gender">Gender</label>
          <select id="gender" required>
            <option value="">Select a gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="female">Other</option>
          </select>
        </div>

        <div class="form-group" id="step" style="display: none">
            <label>Whatâ€™s your biggest challenge lately?</label>
            <div class="challenge-options" id="challenge-options">
            <div class="option-card" data-type="energy-booster">
                <div class="icon">ğŸ”‹</div>
                <div class="text">
                <strong>Tired and unmotivated</strong>
                <p>You often feel drained, foggy, and stuck.</p>
                </div>
            </div>
            <div class="option-card" data-type="calm-balancer">
                <div class="icon">ğŸŒŠ</div>
                <div class="text">
                <strong>Anxious or emotionally unstable</strong>
                <p>Your thoughts race and your heart never rests.</p>
                </div>
            </div>
            <div class="option-card" data-type="action-igniter">
                <div class="icon">ğŸ’­</div>
                <div class="text">
                <strong>Ideas but no action</strong>
                <p>You dream a lot but struggle to begin.</p>
                </div>
            </div>
            <div class="option-card" data-type="grounding-protector">
                <div class="icon">âš¡</div>
                <div class="text">
                <strong>Short-tempered or overwhelmed</strong>
                <p>You react quickly and burn out even faster.</p>
                </div>
            </div>
            </div>
        </div>
    
        <button id="calculateBtn">âœ¦ Begin My Reading âœ¦</button>
        <button id="nextBtn" style="display: none">âœ¦ Next âœ¦</button>
      </div>
      <div class="result-container" id="result">
        <div class="destiny-type" id="destiny-type">Your Energy Type</div>
    
        <div class="bazi-display">
          <div>
            <div class="bazi-pillar" id="year-pillar"></div>
            <div>Year Pillar (Ancestry)</div>
          </div>
          <div>
            <div class="bazi-pillar" id="month-pillar"></div>
            <div>Month Pillar (Parents)</div>
          </div>
          <div>
            <div class="bazi-pillar" id="day-pillar"></div>
            <div>Day Pillar (Self)</div>
          </div>
          <div>
            <div class="bazi-pillar" id="hour-pillar"></div>
            <div>Hour Pillar (Children)</div>
          </div>
        </div>
    
        <div class="wuxing-title">Your Five Element Energy Distribution</div>
        <div class="wuxing-bars">
          <div class="wuxing-bar">
            <div class="wuxing-fill wood" id="wood-bar" style="width: 0%">Wood</div>
          </div>
          <div class="wuxing-bar">
            <div class="wuxing-fill fire" id="fire-bar" style="width: 0%">Fire</div>
          </div>
          <div class="wuxing-bar">
            <div class="wuxing-fill earth" id="earth-bar" style="width: 0%">Earth</div>
          </div>
          <div class="wuxing-bar">
            <div class="wuxing-fill metal" id="metal-bar" style="width: 0%">Metal</div>
          </div>
          <div class="wuxing-bar">
            <div class="wuxing-fill water" id="water-bar" style="width: 0%">Water</div>
          </div>
        </div>
    
        <div class="analysis-content" id="fortune-analysis">
          <!-- Energy analysis will appear here -->
        </div>
    
        <div class="cinnabar-card">
          <div class="cinnabar-icon" id="cinnabar-icon">ğŸ”´</div>
          <h3 class="cinnabar-name" id="cinnabar-name">Recommended Cinnabar Talisman</h3>
          <p>Personalized recommendation based on your elemental profile</p>
          <div class="cinnabar-price" id="cinnabar-price">$28.88</div>
          <ul class="cinnabar-benefits" id="cinnabar-benefits">
            <!-- Product benefits will appear here -->
          </ul>
          <div class="product-disclaimer">
            <span class="disclaimer-content">âš ï¸ This product is based on cultural symbolism and spiritual beliefs. It is not intended to diagnose, treat, cure, or prevent any disease.</span>
          </div>
          <div class="btn-description">
    <p style="font-size: 1.1em; color: #e74c3c; margin-bottom: 15px;">âœ¨ Tap into ancient Chinese mysticism</p>
    <p style="margin-bottom: 20px;">Discover our authentic Energy Bead Bracelets â€” click the button below!<br>each one chosen to align with your spirit.</p>
</div>
<a href="http://zhuenergy.shop/" class="btn-buy" id="buy-button">Order Now</a>
<div class="youtube-shop" style="margin-top: 20px;">
    <p>Or browse our <a href="http://youtube.com/@chinesematchmaker" style="color: #3498db; text-decoration: underline;">YouTube shop</a> for a piece that speaks to your soul.</p>
</div>
          <p style="margin-top: 15px; font-size: 0.9em;" id="limited-counter">Limited to <span id="remaining-count">150</span> pieces</p>
        </div>
    
        <button id="returnBtn">âœ¦ Go Back âœ¦</button>
      </div>
    </div>
    
    <script>
        //æ—¥æœŸæ ¡éªŒ
    // è®¾ç½®åŠ¨æ€æ—¥æœŸèŒƒå›´ï¼ˆæ·»åŠ åœ¨è„šæœ¬æœ€å‰é¢ï¼‰
    document.addEventListener('DOMContentLoaded', function() {
    // åŠ¨æ€é™é‡è®¡ç®—
    function updateRemainingCount() {
        const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        const now = new Date();
        
        // è½¬æ¢ä¸ºæ¬§ç¾ä¸»è¦æ—¶åŒºæ—¶é—´
        const options = { timeZone: userTimeZone, hour12: false };
        const localTime = now.toLocaleString('en-US', options);
        
        // è®¡ç®—å½“æ—¥å·²è¿‡åˆ†é’Ÿæ•°
        const startOfDay = new Date(localTime);
        startOfDay.setHours(0,0,0,0);
        const diffMs = now - startOfDay;
        const tenMinuteIntervals = Math.floor(diffMs / 600000);

        // è®¡ç®—å‰©ä½™æ•°é‡ï¼ˆ150ä¸ºåŸºå‡†ï¼Œæ¯åˆ†é’Ÿå‡å°‘1ï¼‰
        let remaining = 150 - tenMinuteIntervals;
        remaining = remaining > 0 ? remaining : 1;

        // æ›´æ–°æ˜¾ç¤º
        document.getElementById('remaining-count').textContent = remaining;
    }

    // åˆå§‹æ›´æ–°å¹¶è®¾ç½®å®šæ—¶å™¨
    updateRemainingCount();
    setInterval(updateRemainingCount, 60000); // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
        const today = new Date();
        const dd = String(today.getDate()).padStart(2, '0');
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const yyyy = today.getFullYear();
        
        document.getElementById('birthday').max = `${yyyy}-${mm}-${dd}`;
        
        // è®¾ç½®é»˜è®¤å€¼ä¸º30å¹´å‰
    });
// åœ¨DOMContentLoadedäº‹ä»¶ç›‘å¬å™¨å†…æ·»åŠ 
document.addEventListener('DOMContentLoaded', function() {
    // åŸæœ‰çš„æ—¥æœŸèŒƒå›´è®¾ç½®
    const today = new Date();
    const dd = String(today.getDate()).padStart(2, '0');
    const mm = String(today.getDate()).padStart(2, '0');
    const yyyy = today.getFullYear();
    
    // åˆå§‹åŒ–Flatpickr
    flatpickr("#birthday", {
        dateFormat: "Y-m-d",
        minDate: "1900-01-01",
        maxDate: today,

        onChange: function(selectedDates, dateStr) {
            document.getElementById('birthday-native').value = dateStr;
        }
    });

    // åŸæœ‰çš„å…¶ä»–ä»£ç ä¿æŒä¸å˜
});
document.getElementById('calculateBtn').addEventListener('click', () => {
    // æ”¹ä¸ºä½¿ç”¨birthday-nativeçš„å€¼
    birthday = new Date(document.getElementById('birthday').value);
    birthtime = document.getElementById('birthtime').value;
    gender = document.getElementById('gender').value;
    
    // åˆ†å­—æ®µéªŒè¯é€»è¾‘
    if (!birthday) {
        alert('Please select your birth date');
        document.getElementById('birthday').focus();
        return;
    }
    
    if (!birthtime) {
        alert('Please choose your birth time');
        document.getElementById('birthtime').parentElement.scrollIntoView();
        return;
    }
    
    if (!gender) {
        alert('Please select your gender');
        document.getElementById('gender').parentElement.style.backgroundColor = '#fff3cd';
        setTimeout(() => {
            document.getElementById('gender').parentElement.style.backgroundColor = '';
        }, 2000);
        return;
    }
    document.getElementById('first').style.display = 'none';
    document.getElementById('second').style.display = 'none';
    document.getElementById('third').style.display = 'none';
    document.getElementById('step').style.display = 'block';
    document.getElementById('calculateBtn').style.display = 'none';
    document.getElementById('nextBtn').style.display = 'block';
});

    // åŸæœ‰è„šæœ¬å†…å®¹ä¿æŒä¸å˜...

        // ====== ä¸­åœ‹å‚³çµ±å‘½ç†æ•¸æ“šåº« ======
        const DESTINY_DATA = {
            // äº”è¡Œå°æ‡‰é—œä¿‚
            elements: {
                wood: { name: "æœ¨", color: "#2E8B57", score: 0 },
                fire: { name: "ç«", color: "#DC143C", score: 0 },
                earth: { name: "åœŸ", color: "#DAA520", score: 0 },
                metal: { name: "é‡‘", color: "#4682B4", score: 0 },
                water: { name: "æ°´", color: "#4169E1", score: 0 }
            },
            // å…«å­—ç¥ç…
            auspiciousSigns: {
                "å¤©ä¹™è²´äºº": "å±é›£æ™‚åˆ»æœ‰è²´äººç›¸åŠ©",
                "æ–‡æ˜Œè²´äºº": "è°æ˜éäººï¼Œå­¸æ¥­äº‹æ¥­æœ‰æˆ",
                "å¤ªæ¥µè²´äºº": "æ‚Ÿæ€§æ¥µé«˜ï¼Œé©åˆä¿®è¡Œåƒé“",
                "å¤©æœˆå¾·è²´äºº": "ä¸€ç”Ÿå°‘ç½å„ï¼Œé€¢å‡¶åŒ–å‰"
            },
            // å‘½ç†é¡å‹åˆ†æ
            destinyTypes: [
                {
                    name: "æœ¨ç«é€šæ˜æ ¼",
                    desc: "æ‚¨å‘½å¸¶æœ¨ç«ç›¸ç”Ÿä¹‹æ°£ï¼Œå…·æœ‰å‰µé€ åŠ›èˆ‡è¡Œå‹•åŠ›ï¼Œä½†éœ€æ³¨æ„æ°´ç«å¹³è¡¡",
                    weakElement: "water",
                    advice: "å¤šè¦ªè¿‘æ°´ç’°å¢ƒå¯èª¿å’Œå‘½ä¸­ç«æ°£"
                },
                {
                    name: "é‡‘ç™½æ°´æ¸…æ ¼",
                    desc: "é‡‘æ°´ç›¸ç”Ÿè³¦äºˆæ‚¨è°æ˜æ‰æ™ºï¼Œä½†éœ€è£œè¶³åœŸæ°£ä»¥ç©©å®šé‹å‹¢",
                    weakElement: "earth",
                    advice: "ä½©æˆ´é»ƒè‰²ç¡ƒç ‚å¯å¢å¼·åœŸè¡Œèƒ½é‡"
                },
                {
                    name: "åœŸåšé‡‘åŸ‹æ ¼",
                    desc: "ç©©é‡è¸å¯¦æ˜¯æ‚¨çš„å„ªå‹¢ï¼Œä½†éœ€æœ¨æ°£ç–åœŸä»¥é‡‹æ”¾æ½›èƒ½",
                    weakElement: "wood",
                    advice: "ç¶ è‰²æ¤ç‰©èˆ‡æœ¨è³ªæ“ºä»¶å¯æ¿€æ´»é‹å‹¢"
                },
                {
                    name: "æ°´ç«æ—¢æ¿Ÿæ ¼",
                    desc: "æ°´ç«å¹³è¡¡ï¼Œé‹å‹¢å¹³å’Œï¼Œéœ€ä¿æŒå„å…ƒç´ çš„å‡è¡¡"
                }
            ],
            types: [
                {
                    id: "energy-booster",
                    name: "Energy Booster",
                    personality: "Easily fatigued, mentally foggy, struggles with motivation and long-term planning.",
                    explanation: "Youâ€™ve been feeling drained and stuck in neutralâ€”hard to get going and stay focused. This is your reminder to reignite your spark.",
                    product: {
                    name: "Healthy Vermilion Power Bracelet with Signature Agate Stone",
                    material: "Natural Red Cinnabar + Energized Red Agate Beads",
                    price: "$28.88",
                    benefits: [
                        "ğŸŒ• Ritual-charged to awaken energy flow within 7 days",
                        "ğŸ§­ Supports decisive thinking and motivation",
                        "ğŸ”´ Red agate bead anchors scattered thoughts into clear actions",
                        "ğŸ›¡ï¸ Historically inspired by Taoist warriors and protective traditions"
                    ],
                    icon: "ğŸ”¥",
                    callToAction: "Activate Your Fire Energy",
                    badge: "Best for burnout, low drive, and emotional fatigue"
                    }
                },
                {
                    id: "calm-balancer",
                    name: "Calm Balancer",
                    personality: "Highly sensitive, anxious, prone to overthinking and insomnia. Emotionally reactive and easily overwhelmed.",
                    explanation: "When your mind races and your heart never rests, you need a tool to shield and soothe your energy.",
                    product: {
                    name: "Simulated Vermilion & Obsidian Peace Pendant Bracelet",
                    material: "Polished Black Obsidian + Red Cinnabar Core",
                    price: "$28.88",
                    benefits: [
                        "ğŸ›¡ï¸ Obsidian protects your aura from energetic absorption",
                        "ğŸŒ™ Promotes restful sleep and internal stillness",
                        "ğŸŒ¿ Resin-based red beads encourage emotional balance and calm",
                        "ğŸ”„ Pendant acts as an energy antenna â€” enhancing alignment and clarity"
                    ],
                    icon: "ğŸ’§",
                    callToAction: "Find My Inner Balance",
                    badge: " Ideal for anxiety, overthinking, and emotional fatigue"
                    }
                },
                {
                    id: "action-igniter",
                    name: "Action Igniter",
                    personality: "Creative thinker, full of ideas but lacks followâ€‘through. Easily distracted, struggles with selfâ€‘discipline.",
                    explanation: "Dreaming up plans is your strong suitâ€”but turning them into reality has been a challenge. Itâ€™s time to bridge that gap.",
                    product: {
                    name: "Healthy Vermilion & Brass Focus Mala Beads",
                    material: "Real Cinnabar, Antiqued Brass + Action Sigils",
                    price: "$28.88",
                    benefits: [
                        "ğŸ”¥ Sparks execution energy and daily discipline",
                        "ğŸ§­ Brass talisman deflects inner resistance and doubt",
                        "ğŸ§  Transmutes ideas into action â€” ideal for creators and decision-makers",
                        "ğŸ•‰ï¸ Sacred mantra bead channels focused, purposeful movement"
                    ],
                    icon: "âš¡",
                    callToAction: "Boost My Action Energy",
                    badge: " Best for procrastination, mental blocks, and scattered focus"
                    }
                },
                {
                    id: "grounding-protector",
                    name: "Grounding Protector",
                    personality: "Irritable, quickâ€‘tempered, often feels mentally overloaded or spiritually agitated. Tends to burn out quickly.",
                    explanation: "When stress spikes and patience runs thin, you need a protective anchor to calm the storm.",
                    product: {
                    name: "White Quartz Ring with Simulated Vermilion Core",
                    material: "Polished White Quartz + Sacred Cinnabar Core",
                    price: "$28.88",
                    benefits: [
                        "ğŸ§  Helps reduce stress, emotional noise, and burnout",
                        "ğŸŒ€ Brings balance to overstimulated thoughts and emotions",
                        "ğŸŒ• Enhances mindfulness, focus, and spiritual grounding",
                        "ğŸ”¥ Clears stagnant energy and calms mental static"
                    ],
                    icon: "ğŸŒ",
                    callToAction: "Restore My Inner Peace",
                    badge: "Perfect for overworked minds and sensitive hearts"
                    }
                }
            ],
            destinytypes: [
                {
                    name: "Energy Booster (Fire/Earth Deficient)",
                    desc: "Your energy analysis shows a lack of Fire/Earth elements. This causes low motivation and indecisiveness.",
                    product: {
                        id: "energy-bracelet",
                        name: "Red Cinnabar Bracelet",
                        price: "\$28.88",
                        icon: "ğŸ”¥",
                        benefits: [
                        "Boost vitality & confidence",
                        "Ancient Chinese energy talisman",
                        "Handcrafted with pure cinnabar"
                        ],
                        urgencyMsg: "23 people bought this today"
                    }
                },
                {
                    name: "Energy Booster (Fire/Earth Deficient)",
                    desc: "Your energy analysis shows a lack of Fire/Earth elements. This causes low motivation and indecisiveness.",
                    product: {
                        id: "energy-bracelet",
                        name: "Red Cinnabar Bracelet",
                        price: "\$28.88",
                        icon: "ğŸ”¥",
                        benefits: [
                        "Boost vitality & confidence",
                        "Ancient Chinese energy talisman",
                        "Handcrafted with pure cinnabar"
                        ],
                        urgencyMsg: "23 people bought this today"
                    }
                },
                {
                    name: "Energy Booster (Fire/Earth Deficient)",
                    desc: "Your energy analysis shows a lack of Fire/Earth elements. This causes low motivation and indecisiveness.",
                    product: {
                        id: "energy-bracelet",
                        name: "Red Cinnabar Bracelet",
                        price: "\$28.88",
                        icon: "ğŸ”¥",
                        benefits: [
                        "Boost vitality & confidence",
                        "Ancient Chinese energy talisman",
                        "Handcrafted with pure cinnabar"
                        ],
                        urgencyMsg: "23 people bought this today"
                    }
                },
                {
                    name: "Energy Booster (Fire/Earth Deficient)",
                    desc: "Your energy analysis shows a lack of Fire/Earth elements. This causes low motivation and indecisiveness.",
                    product: {
                        id: "energy-bracelet",
                        name: "Red Cinnabar Bracelet",
                        price: "\$28.88",
                        icon: "ğŸ”¥",
                        benefits: [
                        "Boost vitality & confidence",
                        "Ancient Chinese energy talisman",
                        "Handcrafted with pure cinnabar"
                        ],
                        urgencyMsg: "23 people bought this today"
                    }
                }
            ]
        };
        // ç²å–è¡¨å–®å…ƒç´ 
        const form = document.querySelector('.form-container form');
        const birthdayInput = document.getElementById('birthday');
        const birthtimeInput = document.getElementById('birthtime');
        const genderInput = document.getElementById('gender');
        const resultContainer = document.getElementById('result');
        const formContainer = document.getElementById('form');
        let selectedTypeId = null;
        let birthday = null;
        let birthtime = null;
        let gender = null;
        // è¨ˆç®—æŒ‰éˆ•é»æ“Šäº‹ä»¶
        // document.getElementById('calculateBtnB').addEventListener('click', () => {
        //     // ç°¡å–®é©—è­‰
        //     if (!birthdayInput.value || !birthtimeInput.value || !genderInput.value) {
        //         alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«å­—æ®µ');
        //         return;
        //     }
        //     // æ¨¡æ“¬å‘½ç†è¨ˆç®—
        //     const randomType = DESTINY_DATA.destinyTypes[Math.floor(Math.random() * DESTINY_DATA.destinyTypes.length)];
        //     // é¡¯ç¤ºçµæœ
        //     document.getElementById('destiny-type').textContent = randomType.name;
        //     document.getElementById('fortune-analysis').textContent = randomType.desc;
        //     resultContainer.style.display = 'block';
        //     formContainer.style.display = 'none';
        // });
        // è¿”å›æŒ‰éˆ•é»æ“Šäº‹ä»¶
        document.getElementById('returnBtn').addEventListener('click', () => {
            resultContainer.style.display = 'none';
            formContainer.style.display = 'block';
            document.getElementById('first').style.display = 'block';
            document.getElementById('second').style.display = 'block';
            document.getElementById('third').style.display = 'block';
            document.getElementById('step').style.display = 'none';
            document.getElementById('calculateBtn').style.display = 'block';
            document.getElementById('nextBtn').style.display = 'none';
        });
        
        // åœ¨<script>æ ‡ç­¾å†…æ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç 
        // document.getElementById('calculateBtn').addEventListener('click', () => {
        //     birthday = new Date(document.getElementById('birthday').value);
        //     birthtime = new Date(document.getElementById('birthtime').value);
        //     gender = document.getElementById('gender').value;
            
        //     if (!birthday || !gender || !birthtime) {
        //         alert('Please fill all fields');
        //         return;
        //     }
        //     document.getElementById('first').style.display = 'none';
        //     document.getElementById('second').style.display = 'none';
        //     document.getElementById('third').style.display = 'none';
        //     document.getElementById('step').style.display = 'block';
        //     document.getElementById('calculateBtn').style.display = 'none';
        //     document.getElementById('nextBtn').style.display = 'block';
        // });

        document.querySelectorAll(".option-card").forEach(card => {
            card.addEventListener("click", () => {
            // æ¸…é™¤å·²æœ‰é€‰ä¸­çŠ¶æ€
            document.querySelectorAll(".option-card").forEach(c => c.classList.remove("selected"));
            // æ·»åŠ é€‰ä¸­çŠ¶æ€
            card.classList.add("selected");
            // ä¿å­˜é€‰ä¸­çš„ç±»å‹ID
            selectedTypeId = card.getAttribute("data-type");
            });
        });

       document.getElementById("nextBtn").addEventListener("click", function() {
  if (!selectedTypeId) {
    alert("Please select the option that best describes you.");
    return;
  }

  // æ˜¾ç¤ºä¸­å›½é£å¼¹å‡ºå±‚
  const modal = document.getElementById('china-modal');
  modal.style.display = 'flex';
  
  // ç¦ç”¨é¡µé¢æ»šåŠ¨
  document.body.style.overflow = 'hidden';

  // 2ç§’åè‡ªåŠ¨å…³é—­å¹¶ç»§ç»­æµç¨‹
  setTimeout(function() {
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
    
    // æ‰§è¡ŒåŸæœ‰è®¡ç®—é€»è¾‘
    const destinyType = calculateDestinyType(birthday, gender, selectedTypeId);
    showResult(destinyType);
    
  }, 3500); // 2ç§’åè‡ªåŠ¨å…³é—­
});


        // äº”è¡Œèƒ½é‡è®¡ç®—å‡½æ•°
        function calculateWood(year, month, selectedTypeId, birthtime) {
            let value = (month >= 1 && month <= 3 ? 40 : 15) + (year % 10) * 2 + 20;

            if (selectedTypeId === 'energy-booster') value += 5;
            if (selectedTypeId === 'grounding-protector') value -= 5;

            if (birthtime === 'morning') value += 5;
            if (birthtime === 'evening') value -= 3;

            return Math.max(10, value);
        }

        function calculateFire(month, day, selectedTypeId, birthtime) {
            let value = (month >= 4 && month <= 6 ? 50 : 20) + (day % 30) * 1.2;

            if (selectedTypeId === 'energy-booster') value += 10;
            if (selectedTypeId === 'action-igniter') value += 8;
            if (selectedTypeId === 'grounding-protector') value -= 10;

            if (birthtime === 'morning') value += 6;
            if (birthtime === 'evening') value -= 6;

            return Math.max(10, value);
        }

        function calculateEarth(year, day, selectedTypeId, birthtime) {
            const isSeasonEnd = [3, 6, 9, 12].includes(new Date(year, 0, 1).getMonth() + 1);
            let value = (isSeasonEnd ? 45 : 30) + (year % 12) * 1.5 + (day % 6) * 4;

            if (selectedTypeId === 'grounding-protector') value += 8;
            if (selectedTypeId === 'calm-balancer') value += 5;

            if (birthtime === 'afternoon') value += 5;

            return Math.max(10, value);
        }

        function calculateMetal(year, month, selectedTypeId, birthtime) {
            let value = (month >= 7 && month <= 9 ? 55 : 25) + ((year % 5) + 1) * 5;

            if (selectedTypeId === 'calm-balancer') value += 10;

            if (birthtime === 'afternoon') value += 4;
            if (birthtime === 'evening') value += 5;

            return Math.max(10, value);
        }

        function calculateWater(month, day, selectedTypeId, birthtime) {
            const inWinter = (month >= 10 || month === 1);
            let value = (inWinter ? 60 : 35) + (30 - day) * 0.8;

            if (selectedTypeId === 'calm-balancer') value += 8;
            if (selectedTypeId === 'action-igniter') value -= 5;
            if (selectedTypeId === 'grounding-protector') value -= 3;

            if (birthtime === 'evening') value += 6;
            if (birthtime === 'morning') value -= 3;

            return Math.max(10, value);
        }

        // å‘½ç†ç±»å‹åˆ¤å®šç®—æ³•
        function determineType(elements, gender, selectedTypeId = null, birthtime = null) {
            const types = DESTINY_DATA.types;

            // ç”¨æˆ·å·²æ‰‹åŠ¨é€‰æ‹©å¿ƒå¢ƒç±»å‹ï¼Œç›´æ¥è¿”å›
            // if (selectedTypeId && types.some(type => type.id === selectedTypeId)) {
            //     return types.find(type => type.id === selectedTypeId);
            // }

            const scores = {
                wood: elements.wood,
                fire: elements.fire,
                earth: elements.earth,
                metal: elements.metal,
                water: elements.water
            };

            // æ€§åˆ«å¾®è°ƒï¼ˆé˜³åˆš/é˜´æŸ”å±æ€§ï¼‰
            const genderModifier = gender === 'male' ? 1.2 : 0.8;
            scores.fire *= genderModifier;
            scores.water /= genderModifier;

            // â• å‡ºç”Ÿæ—¶é—´å½±å“äº”è¡Œå€¾å‘ï¼ˆé˜´é˜³å½±å“ï¼‰
            if (birthtime === 'morning') {
                scores.fire += 5;
                scores.wood += 5;
            } else if (birthtime === 'afternoon') {
                scores.earth += 5; // å¹³è¡¡ä¹‹æ—¶ï¼Œå¢å¼ºä¸­åœŸ
            } else if (birthtime === 'evening') {
                scores.water += 6;
                scores.metal += 4;
                scores.fire -= 4; // æ™šä¸Šç«è¡°
            }
            const woodBar = document.getElementById('wood-bar');
            const waterBar = document.getElementById('water-bar');
            const metalBar = document.getElementById('metal-bar');
            const earthBar = document.getElementById('earth-bar');
            const fireBar = document.getElementById('fire-bar');
            woodBar.style.width = scores.wood + '%';
            waterBar.style.width = scores.water + '%';
            metalBar.style.width = scores.metal + '%';
            earthBar.style.width = scores.earth + '%';
            fireBar.style.width = scores.fire + '%';

            // å‘½ç†æ¨ç†é€»è¾‘
            // if (scores.fire < 50 && scores.earth < 50) {
            //     return types.find(type => type.id === "energy-booster");
            // } else if (scores.metal > 70 && scores.water > 70) {
            //     return types.find(type => type.id === "calm-balancer");
            // } else if (scores.wood > 65 && scores.fire < 60) {
            //     return types.find(type => type.id === "action-igniter");
            // } else {
            //     return types.find(type => type.id === "grounding-protector");
            // }
            let result = {};
            debugger;
            if (selectedTypeId === "energy-booster") {
                result = types.find(type => type.id === "energy-booster");
            } else if (selectedTypeId === "calm-balancer") {
                result = types.find(type => type.id === "calm-balancer");
            } else if (selectedTypeId === "action-igniter") {
                result = types.find(type => type.id === "action-igniter");
            } else if (selectedTypeId === "grounding-protector") {
                result = types.find(type => type.id === "grounding-protector");
            }
            result.trait = calculateString(scores);
            return result;
        }
        function calculateString(scores) {
        // Convert to array of [element, value]
        const entries = Object.entries(scores);
        
        // Sort descending by value
        entries.sort((a, b) => b[1] - a[1]);
        
        const maxVal = entries[0][1];
        const minVal = entries[entries.length - 1][1];
        
        // Gather all elements with max and min values
        const strongest = entries.filter(([, v]) => v === maxVal).map(([k]) => k);
        const weakest = entries.filter(([, v]) => v === minVal).map(([k]) => k);
        
        // Helper to join list in English
        const joinList = (arr) => {
            if (arr.length === 1) return arr[0];
            if (arr.length === 2) return `${arr[0]} and ${arr[1]}`;
            return `${arr.slice(0, -1).join(', ')}, and ${arr[arr.length - 1]}`;
        };
        
        const strongText = joinList(strongest);
        const weakText = joinList(weakest);
        
        if (maxVal === minVal) {
            return `All elements are balanced at a score of ${maxVal}.`;
        }
        return `You are richest in ${strongText}, and most lacking in ${weakText}.`;
        }

        // ç»“æœå±•ç¤ºå‡½æ•°// Enhanced result rendering function
        function showResult(type) {
            debugger;
            // åŸºæœ¬ä¿¡æ¯å±•ç¤º
            document.getElementById('destiny-type').textContent = type.name;

            // åˆ†æéƒ¨åˆ†æ„å»º
            document.getElementById('fortune-analysis').innerHTML = `
                <p><strong>ğŸ”® Type Explanation:</strong><br> ${type.explanation}</p>
                <p><strong>ğŸ§  Personality Traits:</strong> ${type.personality}</p>
                <p><strong>â™»ï¸ Elemental Insight:</strong> ${type.trait}</p>
            `;
            // <p><strong>âœ¨ Compatible Zodiac:</strong> ${type.zodiac}</p>

            // äº§å“éƒ¨åˆ†æ„å»º
            const product = type.product;

            document.getElementById('cinnabar-icon').textContent = product.icon;
            document.getElementById('cinnabar-name').textContent = product.name;
            document.getElementById('cinnabar-price').textContent = product.price;

            // åŠ å…¥ badge æ ‡ç­¾ï¼ˆå¦‚â€œBest for anxietyâ€ç­‰ï¼‰
            const badgeHTML = product.badge
                ? `<div class="product-badge">â­ ${product.badge}</div>`
                : '';

            // å±•ç¤ºå¥½å¤„åˆ—è¡¨
            const benefitsList = product.benefits.map(
                (b) => `<li>ğŸ”¸ ${b}</li>`
            ).join('');

            document.getElementById('cinnabar-benefits').innerHTML = `
                ${badgeHTML}
                <ul class="benefit-list">${benefitsList}</ul>
            `;

            // CTA æŒ‰é’®æ–‡å­—æ›´æ–°
            const ctaButton = document.getElementById('cta-button');
            if (ctaButton) {
                ctaButton.textContent = product.callToAction || 'Learn More';
                ctaButton.style.display = 'inline-block';
            }

            // æ˜¾ç¤º/éšè—ç•Œé¢
            document.getElementById('result').style.display = 'block';
            document.getElementById('form').style.display = 'none';

            // å¯é€‰ï¼šæ»šåŠ¨åˆ°ç»“æœä½ç½®
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        }

        // function showResult(type) {
        //     document.getElementById('destiny-type').textContent = type.name;
        //     document.getElementById('fortune-analysis').innerHTML = `
        //         <p><strong>Personality:</strong> ${type.personality}</p>
        //         <p><strong>Compatible Zodiac:</strong> ${type.zodiac}</p>
        //         <p><strong>Elemental Insight:</strong> ${type.trait}</p>
        //     `;

        //     // æ›´æ–°äº§å“æ¨è
        //     const product = type.product;
        //     document.getElementById('cinnabar-icon').textContent = product.icon;
        //     document.getElementById('cinnabar-name').textContent = product.name;
        //     document.getElementById('cinnabar-price').textContent = product.price;
            
        //     const benefitsList = product.benefits.map(b => `<li>${b}</li>`).join('');
        //     document.getElementById('cinnabar-benefits').innerHTML = benefitsList;
            
        //     // æ˜¾ç¤ºç»“æœé¡µ
        //     document.getElementById('result').style.display = 'block';
        //     document.getElementById('form').style.display = 'none';
        // }
        function calculateDestinyType(birthDate, gender, selectedTypeId) {
            debugger;
            // 1. å°†ç”Ÿæ—¥è½¬æ¢ä¸ºå†œå†å¹´ä»½ï¼ˆç®€åŒ–ç‰ˆï¼‰
            let year = birthDate.getFullYear();
            let month = birthDate.getMonth() + 1;
            let day = birthDate.getDate();
            debugger;
            try {
                // const result = solarlunar.solar2lunar(year, month, day);
                const solar = Solar.fromYmd(year, month, day);
                const lunar = solar.getLunar();
                year = lunar.getYear(); // å†œå†å¹´ä»½
                month = lunar.getMonth(); // å†œå†æœˆä»½
                day = lunar.getDay(); // å†œå†æ—¥æœŸ
                console.log(year+month+day)
            } catch (error) {
                alert('Invalid date format. Please try again.');
            }
            // 2. è®¡ç®—äº”è¡Œèƒ½é‡å€¼ï¼ˆ0-100ï¼‰
            const elements = {
                wood: calculateWood(year, month, selectedTypeId),
                fire: calculateFire(month, day, selectedTypeId),
                earth: calculateEarth(year, day, selectedTypeId),
                metal: calculateMetal(year, month, selectedTypeId),
                water: calculateWater(month, day, selectedTypeId)
            };
        
            // 3. æ ¹æ®äº”è¡Œç›¸ç”Ÿç›¸å…‹ç¡®å®šå‘½ç†ç±»å‹
            return determineType(elements, gender, selectedTypeId);
        }
    </script>
    <!-- ä¸­å›½é£å¼¹å‡ºå¼è¿‡æ¸¡å±‚ -->
<div id="china-modal" class="china-modal">
    <div class="modal-content">
      <!-- å…«å¦æ—‹è½¬ç›˜ -->
      <div class="bagua-wheel">
        <div class="bagua-symbols">
          <span>â˜°</span><span>â˜±</span><span>â˜²</span><span>â˜³</span>
          <span>â˜´</span><span>â˜µ</span><span>â˜¶</span><span>â˜·</span>
        </div>
        <!-- å¤ªæä¸­å¿ƒ -->
        <div class="taiji-center">
          <div class="yin-yang"></div>
        </div>
      </div>
      <!-- æ–‡å­—è¯´æ˜ -->
      <div class="loading-text">
        <p class="title">å¤©æ©Ÿæ¨æ¼”ä¸­...</p>
        <p class="subtitle">å…«å¦è¼ªè½‰ Â· é™°é™½ç›¸ç”Ÿ Â· å‘½ç†é¡¯ç¾</p>
      </div>
    </div>
  </div>
<!-- PowerXå¤–è´¸ç‰ˆç‰ˆæƒæ  -->
<footer style="
  font-family: 'Helvetica Neue', Arial, sans-serif;
  background: #f5f7fa;
  padding: 2.5rem 0;
  border-top: 1px solid #e5e7eb;
">
  <div style="
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
    text-align: center;
  ">



    <!-- å¤šè¯­è¨€ç‰ˆæƒå£°æ˜ -->
    <p style="
      color: #4b5563;
      font-size: 0.875rem;
      line-height: 1.6;
      margin: 0.5rem 0;
    ">
      Â© <span id="copyright-year">2025</span><a href="https://zhuenergy.shop/"> Inner Alchemy Beads</a>
      <span aria-hidden="true" style="color: #d1d5db;">|</span>
      <span style="white-space: nowrap;">All Rights Reserved</span>
    </p>


    <!-- å¤–è´¸åˆè§„å£°æ˜ -->
    <p style="
      color: #6b7280;
      font-size: 0.75rem;
      margin-top: 1.5rem;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    ">
      Products may be subject to export controls. By using this site, you agree to comply with all applicable international trade laws.
    </p>
  </div>

  <script>
    document.getElementById('copyright-year').textContent = new Date().getFullYear();
  </script>
</footer>  
</body>
</html>